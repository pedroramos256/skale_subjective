<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="css/styles.css">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="shortcut icon" href="resources/fav.png" type="image/x-icon">
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
        <title>Subjective</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">    </head>
    <body>
        <div class="container col-lg-9">
        <!--<div id="particles-js"></div>-->
            <div class="row">
              
              <div id="loader">
                <br>
                <p class="text-center">Loading...</p>
              </div>
              <div id="content" style="display: none;">
                <div align="center">
                    <br>
                      <img src="resources/logo3.png" class="img-fluid" style="max-width: 60%; margin-left: 5%;">  
                    <br>
                    <form id="search_form" role="form">
                        <div class="form-group col-lg-7">
                            <div class="input-group">
                                <input id="owner" class="form-control border-3 input-lg w-50" placeholder="Owner address"></input>
                                <input id="index" type="number" class="form-control input-lg w-25 border-3" placeholder="Index" min="0"></input>
                                <span class="input-group-btn">
                                <button type="button" class="btn btn-outline-dark btn-lg border-4 fw-bold" style="border-radius: 5px;" data-bs-toggle="collapse" data-bs-target="#collapseExample2" data-target="#collapseExample2" aria-expanded="false" aria-controls="collapseExample2">Search</button>
                            </div>
                        </div>       
                    </form>
                </div>
                <br>
                <div class="collapse" id="collapseExample2">
                  <div align="center">
                  <div class="card border-3 border-dark" style="background-color: rgba(245, 245, 245, 0.4); width: 30%;">
                      <br>
                      <p id="value_searched" align="left" class=" spacer" style="margin-left: 5%"><b>Value:</b> 250 </p>
                      <hr class="rounded" style="width: 95%">
                      <p id="description_searched" align="left" class=" spacer" style="margin-left: 5%"><b>Description:</b> Bicycle auction</p>
                      <!--<hr class="rounded" style="width: 95%">
                      <p align="left" class=" spacer" style="margin-left: 5%"><b>Third Party:</b> Subjective</p>
                      <hr class="rounded" style="width: 95%">
                      <small align="left" class="fw-bold spacer" style="margin-left: 5%">Maximum Price:</small>
                      <hr class="rounded" style="width: 95%">
                      <small align="left" class="fw-bold spacer" style="margin-left: 5%">Minimum Price:</small>
                      <hr class="rounded" style="width: 95%">
                      <small align="left" class="fw-bold spacer" style="margin-left: 5%">Quotient:</small>
                      <hr class="rounded" style="width: 95%">
                      <small align="left" class="fw-bold spacer" style="margin-left: 5%">Days for Upfront:</small>
                      <hr class="rounded" style="width: 95%">
                      <small align="left" class="fw-bold spacer" style="margin-left: 5%">Days for Evaluation:</small>-->
                      <br>
                    </div>
                  <br>
                  <form style="display: inline-block;" onSubmit="App.upfront();" role="form">
                      <div class="form-group">
                          <div class="input-group">
                              <button type="submit" class="btn btn-outline-success btn-lg border-4 fw-bold" style="border-radius: 5px;">Accept</button>
                          </div>
                      </div>
                  </form>
                  <form style="display: inline-block;" onSubmit="App.evaluate();" role="form">
                      <div class="form-group col-lg-25" >
                          <div class="input-group">
                              
                              <input id="evaluation" type="number" class="form-control border-3" placeholder="Proposed ETH Value" min="0"></input>
                              <!--<div class="form-check" style="padding-top:0.5em; margin-left:0.5em; margin-right:1em;">
                                  <input class="form-check-input eval_upfront" style="text-align: left;" name="eval_upfront" type="checkbox" id="eval_upfrontRadio">
                                  <label class="form-check-label" for="thirdPartyRadio1">Pay upfront</label>
                              </div>-->
                              <span class="input-group-btn">
                                  <button id="evaluation_button" type="button" class="btn btn-outline-warning btn-lg border-4 fw-bold yellow-hover" style="border-radius: 5px;">Negotiate</button>
                              </span>
                          </div>
                          
                      </div>
                  </form>
                  <form style="display: inline-block;" onSubmit="App.upfront();" role="form">
                      <div class="form-group">
                          <div class="input-group"> 
                              <button type="submit" class="btn btn-outline-danger btn-lg border-4 fw-bold" style="border-radius: 5px; margin-top: 6px">Decline</button>
                          </div>
                      </div>
                  </form>
                  <br><br>
                  <table id="mytable" class="table table-bordered w-77" style="text-align: center;"></table>
                  </div>
              </div>
  
  
                <div align="center">
                    <button class="btn btn-outline-dark btn-lg btn-block border-4 fw-bold"  style="border-radius: 5px; width: 59%;" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample" aria-expanded="true" aria-controls="collapseExample">
                        New Transaction
                    </button>
                </div>
                <div class="collapse" id="collapseExample" style="border:1px">
                    <br><br>
                    <form onSubmit="App.createContract();" id="myForm" role="form">
      
                        <div class="row g-3 justify-content-center">
                            <div class="col-lg-7">
                              <input id="secondParty" class="form-control border-3" placeholder="Second Party Address">
                            </div>
                        </div>                        
                        <br>
                          <!--<div class="col-lg-2">
                            <label for="isSeller" class="col-form-label">Action: </label>
                          </div>-->
                          
                          <!--<div class="form-check form-check-inline">
                            <input class="form-check-input isSeller" type="radio" name="isSeller" id="inlineRadio1" value="true" checked>
                            <label class="form-check-label" for="inlineRadio1">Request</label>
                          </div>
                          <div class="form-check form-check-inline">
                              <input class="form-check-input isSeller" type="radio" name="isSeller" id="inlineRadio2" value="false">
                              <label class="form-check-label" for="inlineRadio2">Pay</label>
                          </div>-->
                        <div class="row g-3 justify-content-center">
                            <div class="col-lg-7">
                              <input type="number" id="max_price" class="form-control border-3" placeholder="Value in Finney" min="0">
                            </div>
                        </div>
                        <br>
                        <div class="row g-3 justify-content-center">
                          <div class="col-lg-7">
                            <textarea id="description" class="form-control border-3" aria-label="Description" placeholder="Description"></textarea>
                          </div>
                        </div>
                        <br>
                        <div class="row justify-content-center">
                            <span class="col-lg-7 btn-block">
                            <div class="btn-group btn-group d-flex">
                          
                            <input type="radio" class="btn-check" name="options" id="option1" autocomplete="off" />
                            <label class="btn btn-outline-dark btn-lg btn-block border-4 fw-bold isSeller" style="margin-right: 5px" for="option1" value="true">Request</label>
                          
                            <input type="radio" class="btn-check" name="options" id="option2" autocomplete="off" />
                            <label class="btn btn-outline-dark btn-lg btn-block border-4 fw-bold isSeller" for="option2" value="false">Pay</label>
                          </div>
                          </span>
                          </div>
                        <br>
                        <div class="row g-3 align-items-center">
                          <!--<div class="col-lg-2">
                            <label for="max_evaluation" class="col-form-label">Maximum evaluation: </label>
                          </div>
                          <div class="col-lg-2">
                            <input type="number" id="max_evaluation" class="form-control" value="3">
                          </div>-->
                        </div>
                        <br>
                        <div>
                          <button class="btn btn-outline-dark btn-block" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2" aria-expanded="false" aria-controls="collapse2">
                            Advanced Options
                          </button>
                        </div>
                        <div class="collapse" id="collapse2">
                          <br>
                          <div class="row g-3 align-items-center">
                            <div class="col-lg-2 fw-bold">
                              <label for="thirdParty" class="col-form-label">Third party: </label>
                            </div>
                            <div class="col-lg-4">
                              <div class="form-check">
                                <input class="form-check-input thirdParty" name="thirdParty" type="radio" id="thirdPartyRadio1" value="0x0C62eD2E5BfB40F7600cD57489226b9471C9Db6f" checked>
                                <label class="form-check-label" for="thirdPartyRadio1">Subjective</label>
                              </div>
                              <div class="form-check">
                                <input class="form-check-input thirdParty" name="thirdParty" type="radio" id="thirdPartyRadio4" value="other">
                                <label class="form-check-label" for="thirdPartyRadio4">Other</label>
                              </div>
                              
                            </div>
                          </div>
                          <br>
                          <div class="row g-3 align-items-center">
                            <div class="col-lg-2 fw-bold">
                              <label for="min_price" class="col-form-label ">Minimum price: </label>
                            </div>
                            <div class="col-lg-2">
                              <input type="number" id="min_price" class="form-control border-3" value="0">
                            </div>
                          </div>
                          <br>
                          <div class="row g-3 align-items-center">
                              <div class="col-lg-2 fw-bold">
                                <label for="quotient" class="col-form-label">Quotient: </label>
                              </div>
                              <div class="col-lg-2">
                                <input type="number" id="quotient" class="form-control border-3" value="10">
                              </div>
                          </div>
                          <br>
                          <div class="row g-3 align-items-center">
                              <div class="col-lg-2 fw-bold">
                                <label for="upfront_time" class="col-form-label">Days for upfront: </label>
                              </div>
                              <div class="col-lg-2">
                                <input type="number" id="upfront_time" class="form-control border-3" value="7">
                              </div>
                          </div>
                          <br>
                          <div class="row g-3 align-items-center">
                              <div class="col-lg-2 fw-bold">
                                <label for="evaluation_time" class="col-form-label">Days for evaluation: </label>
                              </div>
                              <div class="col-lg-2">
                                <input type="number" id="evaluation_time" class="form-control border-3" value="30">
                              </div>
                          </div>
                          <br>
                          <div class="row g-3 align-items-center">
                            <div class="col-lg-2 fw-bold">
                              <label for="payUpfront" class="col-form-label">Pay upfront now? </label>
                            </div>
                            <span class="col-lg-4">
                            <div class="form-check form-check-inline">
                              <input class="form-check-input payUpfront" type="radio" name="payUpfront" id="upfrontRadio1" value="true" checked>
                              <label class="form-check-label" for="upfrontRadio1">Yes</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input payUpfront" type="radio" name="payUpfront" id="upfrontRadio2" value="false">
                                <label class="form-check-label" for="upfrontRadio2">No</label>
                            </div> 
                            </span>
                          </div>
                          <br>
                          <div class="row g-3 align-items-center">
                            <div class="col-lg-2 fw-bold">
                              <label for="evaluation" class="col-form-label">Evaluate now? </label>
                            </div>
                            <span class="col-lg-4">
                              <div class="form-check form-check-inline">
                              <input class="form-check-input evaluation" type="radio" name="evaluation" id="evaluationRadio1" value="true">
                              <label class="form-check-label" for="evaluationRadio1">Yes</label>
                            </div>  
                            <div class="form-check form-check-inline">
                                <input class="form-check-input evaluation" type="radio" name="evaluation" id="evaluationRadio2" value="false" checked>
                                <label class="form-check-label" for="evaluationRadio2">No</label>
                            </div>
                            <input class='form-control evaluation w-50' name='evaluation' id='evaluation-input' type="number" value="1001"/><br><!--1001 is a default value-->
                            </span>
                          </div>
                          <div id="table-preview-div"></div>
                        </div>
                        <br>
                        <button type="submit" class="btn btn-dark btn-lg" style="border-radius: 5px;">Create</button>
                        
                      </form>
                </div>
                <br>
                <br>
                <div class="accordion" id="FAQ">
                  <div class="accordion-item border-3">
                    <h2 class="accordion-header border-3" id="headingOne">
                      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                        What is a subjective smart contract?
                      </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse border-3" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                      <div class="accordion-body">
                        <p>
                          A smart contract is an algorithm in a blockchain that act as an intermediary, enforcing an agreement between all the participants.
                          <br>
                          It is the underlying technology of <b>stable coins, NFTs, token swaps, and DAOs</b>.
                          <br><br>
                          An even more interesting application of smart contracts is with the connection with <b>real world events</b>.
                          <br>
                          The potential applications go from insurance services to supply chains, using IoT connected to the blockchain.
                          <br><br>
                          The problem arises when the real world event cannot be read by an IoT device, and or the information is <b>not public</b>, so only the parties involved know what happened. 
                          <br><br>
                          The goal of a <b>subjective</b> smart contract is to solve this use cases!                         
                        </p>
                      </div>
                    </div>
                  </div>
                  <div class="accordion-item border-3">
                    <h2 class="accordion-header" id="headingTwo">
                      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                        How to use it?
                      </button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                      <div class="accordion-body">
                        Imagine you buy or sell a product or service. 
                        <br>
                        No one else knows if the product or service was delivered as expected, except for the buyer and seller.
                        <br><br>
                        Using game theory, we can encourage both parties to agree on what actually happened.
                        <br>
                        The buyer can evaluate the seller with 0 (bad product or service) or 1 (good).
                        <br>
                        The seller can auto-evaluate himself also with 0 or 1.
                        <br><br>
                        Buyer <b>1</b>, Seller <b>1</b>: Buyer pays <b>p</b> to the seller. 
                        <br><br>
                        Buyer <b>0</b>, Seller <b>0</b>: No one pays anything.
                        <br><br>
                        Buyer <b>0</b>, Seller <b>1</b>: Someone is lying.
                        <br>
                        Since the smart contract doesn't know who is lying:
                        <br> 
                        The buyer will pay <b>p</b> plus a penalty <b>q</b>. 
                        <br>
                        And the seller will pay also a penalty <b>q</b>.
                        <br><br>
                        Buyer <b>1</b>, Seller <b>0</b>: Well, both are being pretty modest here. 
                        <br>
                        This might happen if instead of the evaluation being between 0 and 1, if it a star rating between 0 and 3 or 5.
                        <br>
                        If the buyer evaluates the product or service with 5 stars and the seller auto-evaluates with 4, and the <b>p</b> is for example 5$, then the buyer will pay 4.5$. 
                      </div>
                    </div>
                  </div>
                  <div class="accordion-item border-3">
                    <h2 class="accordion-header" id="headingThree">
                      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                        Contract parameters.
                      </button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                      <div class="accordion-body">
                        <b>Second party</b>: The wallet address of the person with whom you are making a contract.
                        <br><br>
                        <b>Third party</b>: Well, if both get a penalty, the money you lost cannot go to a black hole, you can choose to whom that money should go.
                        <br><br>
                        <b>Role</b>: Are you the buyer or the seller of this contract?
                        <br><br>
                        <b>Max Price</b>: The price to be payed if both agree the product or service was perfect.
                        <br><br>
                        <b>Min Price</b>: The price to be payed if both agree the product was not satisfactory, it can even be a negative value, meaning the sellers needs to compensate the buyer for not delivering well.
                        <br><br>
                        <b>Quotient</b>: How many times smaller should be the penalty, compared with the maximum price.
                        <br><br>
                        <b>Max evaluation</b>: Is it a true false situation? Is it a star system between 0 and 3 or 5 stars? You choose.
                        <br><br>
                        <b>Days for upfront</b>: How many days do each party have to pay an upfront value?
                        <br><br>
                        <b>Days for evaluation</b>: How many days do each party have to evaluate the product or service?
                      </div>
                    </div>
                  </div>
                  <div class="accordion-item border-3">
                    <h2 class="accordion-header" id="headingFour">
                      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                        White paper and source code.
                      </button>
                    </h2>
                    <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
                      <div class="accordion-body">
                        <a href="https://github.com/pedroramos256/skale_subjective" class="link-primary">Check it out!</a>
                      </div>
                    </div>
                  </div>
                </div>
                <br>
              </div>
            </div>
        </div>
        
        
        <div class="modal fade" tabindex="-1" role="dialog" id="myModal">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header justify-content-center">
                <h4 class="modal-title fw-bold">Contract Created with Success!</h4>
              </div>
              <div class="modal-body">
                <p >You can follow this contract using these identifiers:</p>
                <p><b>Contract Owner:</b></p>
                <div id="owner_address"></div>
                <p><b>Index:</b></p>
                <div id="current_id"></div>
            </div><!-- /.modal-content -->
          </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@truffle/contract@latest/dist/truffle-contract.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@latest/dist/js/bootstrap.min.js"></script>
        <!--
        <script src="js/jquery.min.js"></script>
        <script src="js/web3.min.js"></script>
        <script src="js/truffle-contract.js"></script>
        <script src="js/bootstrap.min.js"></script>
        -->
        <script src="https://unpkg.com/@metamask/detect-provider/dist/detect-provider.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
       
        <script src="js/app.js"></script>

    </body>
</html>
